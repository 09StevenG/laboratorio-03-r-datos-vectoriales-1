---
title: "GF-0604 Procesamiento de datos geográficos<br>Laboratorio 03: R - Datos vectoriales"
author: "Manuel Vargas"
date: "2020-05-11"
output:
  html_document:
    theme: readable    
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Descripción general
En este laboratorio, aplicará varios comandos de graficación y de manejo de datos geoespaciales vectoriales en el lenguaje de programación [R](https://www.r-project.org/). El resultado final será un documento en la sintaxis [R Markdown](https://rmarkdown.rstudio.com/) publicado en [GitHub Pages](https://pages.github.com/).

## Fecha de entrega y entregables
La fecha límite de entrega de este laboratorio es el **lunes 18 de mayo de 2020**. Debe enviarle al profesor por correo electrónico la dirección del sitio en GitHub Pages resultante.

## Objetivos
1. Aplicar comandos de formateo de tablas de los paquetes [knitr](https://cran.r-project.org/web/packages/knitr/) y [kableExtra](https://cran.r-project.org/web/packages/kableExtra/) de R.
2. Aplicar comandos de graficación del paquete [ggplot2](https://ggplot2.tidyverse.org/) de R.
3. Aplicar comandos de manejo de datos geoespaciales vectoriales del paquete [sf](https://cran.r-project.org/web/packages/sf/) de R.
4. Generar documentos en R Markdown con tres tipos de visualizaciones de datos:
  - Tablas.
  - Gráficos.
  - Mapas.

## Trabajo previo
Se recomienda leer el material preparado por el profesor y consultar los recursos listados en:

* [Lección 05: El lenguaje de programación R - Graficación](https://geoprocesamiento-2020i.github.io/leccion-05-r-graficacion/).
* [Lección 06: El lenguaje de programación R - Datos vectoriales](https://geoprocesamiento-2020i.github.io/leccion-06-r-datos-vectoriales/).
* [Tutorial sobre Git](https://geoprocesamiento-2020i.github.io/tutorial-git/).

## Bifuración y clonación de este documento
Ejecute los siguientes pasos para bifurcar a su cuenta en GitHub el repositorio que contiene este documento y posteriormente clonarlo a su computadora para editarlo con RStudio:

1. Bifurque (_fork_) el repositorio [https://github.com/geoprocesamiento-2020i/laboratorio-03-r-datos-vectoriales-1](https://github.com/geoprocesamiento-2020i/laboratorio-03-r-datos-vectoriales-1) a su cuenta personal en GitHub.
2. En el apartado _Settings_ del repositorio bifurcado a su cuenta, busque la sección _GitHub Pages_ y habilítela al seleccionar _master branch_ como fuente. Tome nota de la dirección web resultante (ej. https://usuario.github.io/laboratorio-03-r-datos-vectoriales-1/).
3. En RStudio, clone el repositorio de su cuenta personal con la opción de menú _File - New Project - Version Control - Git_. En _Repository URL_ escriba la dirección de su repositorio (ej. https://usuario.github.io/laboratorio-03-r-datos-vectoriales-1.git). Puede obtener esta dirección con el botón _Clone or download_, en la página principal del mismo repositorio.
4. En R Studio, abra el documento _index.Rmd_ y desarrolle los ejercicios del laboratorio. Cada vez que desee actualizar su documento en GitHub y GitHub Pages:
  - Presione el botón _Knit_ en RStudio para generar el archivo correspondiente en la sintaxis HTML.
  - Suba a su repositorio en GitHub, los archivos _index.Rmd_ e _index.html_, ya sea mediante la interfaz de GitHub o mediante los comandos de [Git](https://git-scm.com/) explicados en el [tutorial](https://geoprocesamiento-2020i.github.io/tutorial-git/).

## Desarrollo
En los siguientes ejercicios se utiliza el data frame ```world```, contenido en el paquete [spData](https://cran.r-project.org/web/packages/spData/).

0. Carga de paquetes:
```{r}
# Paquete para generación de documentos (ej. HTML)
library(knitr)

# Paquete para formateo de tablas
library(kableExtra)

# Paquete de graficación
library(ggplot2)

# Paquete de manejo de datos geoespaciales vectoriales
# library(sf)

# Paquete con conjuntos de datos geoespaciales
library(spData)
```

Realice los siguientes ejercicios de graficación y manejo de datos vectoriales en R (el valor porcentual de cada uno se muestra entre paréntesis).

1. (5%) Mediante la función ```names()```, observe las columnas que componen el data frame ```world```.
```{r}
names(world)
```
NOTA: recuerde que también puede explorar los datos con funciones como ```str()```, ```summary()``` y ```View()```.

2. (5%) Mediante la función ```kable()``` del paquete [knitr](https://cran.r-project.org/web/packages/knitr/), despliegue en una tabla las diez primeras observaciones (i.e. filas, registros) y las ocho primeras variables (i.e. columnas) del data frame  ```world```.
```{r}
kable(world[1:10, 1:8], caption="Datos demográficos de los países del mundo")
```

3. (5%) Mediante la función ```kable()```, despliegue en una tabla las diez primeras observaciones y las variables correspondientes a nombre del país, continente, población, esperanza de vida y de renta per cápita del data frame  ```world```. Despliegue los nombres de las columnas en español.
```{r}
kable(
  world[1:10, c("name_long", "continent", "pop", "lifeExp", "gdpPercap")], 
  col.names = c("País", "Continente", "Población", "Esperanza de vida", "Renta per cápita"),
  caption="Datos demográficos de los países del mundo"
  )
```

4.
```{r}
kable(
  world[, c("name_long", "continent", "pop", "lifeExp", "gdpPercap")], 
  col.names = c("País", "Continente", "Población", "Esperanza de vida", "Renta per cápita"),
  caption="Datos demográficos de los países del mundo"
  ) %>%
kable_styling() %>%
scroll_box(width = "800px", height = "500px", fixed_thead = TRUE)
```
Note el uso del operador ```%>%```, llamado _pipe_ (tubo), para transmitir datos entre funciones.
